<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game L·ªãch S·ª≠ Vi·ªát Nam</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Menu ch√≠nh */
        .main-menu {
            text-align: center;
            padding: 40px 20px;
        }

        .main-title {
            font-family: 'Bangers', cursive;
            font-size: 4em;
            color: white;
            text-shadow: 4px 4px 8px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .game-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }

        .game-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .game-card h2 {
            color: #2d3748;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .game-card p {
            color: #718096;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .play-btn {
            margin-top: 20px;
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .play-btn:hover {
            transform: scale(1.1);
        }

        /* Game screens */
        .game-screen {
            display: none;
            animation: fadeIn 0.5s;
        }

        .game-screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .game-header {
            background: white;
            border-radius: 20px;
            padding: 20px 30px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .back-btn {
            padding: 10px 25px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #c53030;
            transform: scale(1.05);
        }

        .score-display {
            font-size: 1.5em;
            font-weight: 700;
            color: #2d3748;
        }

        /* Game 1: Quiz */
        .quiz-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 800px;
            margin: 0 auto;
        }

        .question {
            font-size: 1.5em;
            color: #2d3748;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            padding: 20px;
            background: #f7fafc;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .option-btn:hover {
            background: #edf2f7;
            border-color: #667eea;
            transform: translateX(10px);
        }

        .option-btn.correct {
            background: #48bb78;
            color: white;
            border-color: #38a169;
        }

        .option-btn.wrong {
            background: #f56565;
            color: white;
            border-color: #e53e3e;
        }

        /* Game 2: Strategy */
        .battlefield {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            border-radius: 20px;
            padding: 30px;
            min-height: 500px;
            position: relative;
            overflow: hidden;
        }

        .unit {
            position: absolute;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }

        .unit:hover {
            transform: scale(1.2);
        }

        .unit.friendly {
            filter: hue-rotate(200deg);
        }

        .unit.enemy {
            filter: hue-rotate(0deg);
        }

        /* Game 3: Timeline */
        .timeline-game {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            margin: 0 auto;
        }

        .event-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
            cursor: move;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .event-card:hover {
            transform: scale(1.05);
        }

        .event-card.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            border: 3px dashed #cbd5e0;
            border-radius: 15px;
            padding: 20px;
            min-height: 100px;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #edf2f7;
            border-color: #667eea;
        }

        /* Game 4: Memory */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 600px;
            margin: 30px auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: white;
            font-weight: 700;
            transition: all 0.3s;
            position: relative;
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            color: #2d3748;
            border: 3px solid #667eea;
        }

        .memory-card.matched {
            background: #48bb78;
            color: white;
        }

        /* Game 5: Millionaire */
        .millionaire-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .prize-ladder {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .prize-item {
            padding: 10px 20px;
            margin: 5px 0;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            font-weight: 600;
        }

        .prize-item.current {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .prize-item.completed {
            background: #48bb78;
            color: white;
        }

        .lifelines {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .lifeline-btn {
            padding: 10px 20px;
            background: #ed8936;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .lifeline-btn:hover:not(:disabled) {
            background: #dd6b20;
            transform: scale(1.05);
        }

        .lifeline-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-screen {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            margin: 50px auto;
        }

        .result-screen h2 {
            font-size: 2.5em;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .result-score {
            font-size: 4em;
            color: #667eea;
            font-weight: 700;
            margin: 20px 0;
        }

        .restart-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
        }

        .restart-btn:hover {
            transform: scale(1.1);
        }

        .timer {
            font-size: 2em;
            font-weight: 700;
            color: #e53e3e;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="mainMenu" class="main-menu">
            <h1 class="main-title">üáªüá≥ GAME L·ªäCH S·ª¨ VI·ªÜT NAM üáªüá≥</h1>
            <div class="game-grid">
                <div class="game-card" onclick="startGame('quiz')">
                    <div class="game-icon">üìö</div>
                    <h2>Quiz L·ªãch S·ª≠</h2>
                    <p>Tr·∫£ l·ªùi c√¢u h·ªèi tr·∫Øc nghi·ªám v·ªÅ l·ªãch s·ª≠ Vi·ªát Nam. Bao nhi√™u c√¢u b·∫°n tr·∫£ l·ªùi ƒë√∫ng?</p>
                    <button class="play-btn">Ch∆°i Ngay</button>
                </div>

                <div class="game-card" onclick="startGame('strategy')">
                    <div class="game-icon">‚öîÔ∏è</div>
                    <h2>Tr·∫≠n Ng·ªçc H·ªìi</h2>
                    <p>Ch·ªâ huy qu√¢n T√¢y S∆°n ƒë√°nh √∫p qu√¢n Thanh trong ƒë√™m giao th·ª´a!</p>
                    <button class="play-btn">Ch∆°i Ngay</button>
                </div>

                <div class="game-card" onclick="startGame('timeline')">
                    <div class="game-icon">‚è∞</div>
                    <h2>Timeline Challenge</h2>
                    <p>S·∫Øp x·∫øp c√°c s·ª± ki·ªán l·ªãch s·ª≠ theo ƒë√∫ng th·ª© t·ª± th·ªùi gian!</p>
                    <button class="play-btn">Ch∆°i Ngay</button>
                </div>

                <div class="game-card" onclick="startGame('memory')">
                    <div class="game-icon">üß†</div>
                    <h2>Gh√©p ƒê√¥i Anh H√πng</h2>
                    <p>T√¨m c√°c c·∫∑p anh h√πng v√† chi·∫øn c√¥ng trong l·ªãch s·ª≠ Vi·ªát Nam!</p>
                    <button class="play-btn">Ch∆°i Ngay</button>
                </div>

                <div class="game-card" onclick="startGame('millionaire')">
                    <div class="game-icon">üí∞</div>
                    <h2>Ai L√† Tri·ªáu Ph√∫</h2>
                    <p>15 c√¢u h·ªèi l·ªãch s·ª≠ t·ª´ d·ªÖ ƒë·∫øn kh√≥. B·∫°n c√≥ th·ªÉ chinh ph·ª•c?</p>
                    <button class="play-btn">Ch∆°i Ngay</button>
                </div>
            </div>
        </div>

        <!-- Game 1: Quiz -->
        <div id="quizGame" class="game-screen">
            <div class="game-header">
                <button class="back-btn" onclick="backToMenu()">‚Üê V·ªÅ Menu</button>
                <div class="score-display">ƒêi·ªÉm: <span id="quizScore">0</span></div>
                <div class="timer">‚è±Ô∏è <span id="quizTimer">30</span>s</div>
            </div>
            <div class="quiz-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgress" style="width: 0%"></div>
                </div>
                <div class="question" id="quizQuestion"></div>
                <div class="options" id="quizOptions"></div>
            </div>
        </div>

        <!-- Game 2: Strategy -->
        <div id="strategyGame" class="game-screen">
            <div class="game-header">
                <button class="back-btn" onclick="backToMenu()">‚Üê V·ªÅ Menu</button>
                <div class="score-display">
                    Qu√¢n TA: <span id="friendlyCount">10</span> | 
                    Qu√¢n ƒê·ªäCH: <span id="enemyCount">15</span>
                </div>
            </div>
            <div class="quiz-container" style="text-align: center; margin-bottom: 20px;">
                <h2>üéØ Nhi·ªám V·ª•: Ti√™u Di·ªát Qu√¢n Thanh!</h2>
                <p style="font-size: 1.1em; color: #718096;">Click v√†o qu√¢n xanh (TA) r·ªìi click v√†o qu√¢n ƒë·ªè (ƒê·ªäCH) ƒë·ªÉ t·∫•n c√¥ng!</p>
            </div>
            <div class="battlefield" id="battlefield"></div>
        </div>

        <!-- Game 3: Timeline -->
        <div id="timelineGame" class="game-screen">
            <div class="game-header">
                <button class="back-btn" onclick="backToMenu()">‚Üê V·ªÅ Menu</button>
                <div class="score-display">ƒêi·ªÉm: <span id="timelineScore">0</span></div>
            </div>
            <div class="timeline-game">
                <h2 style="text-align: center; color: #2d3748; margin-bottom: 30px;">
                    K√©o th·∫£ c√°c s·ª± ki·ªán theo th·ª© t·ª± th·ªùi gian (c≈© ‚Üí m·ªõi)
                </h2>
                <div id="timelineEvents" style="margin-bottom: 30px;"></div>
                <div id="timelineDropZones"></div>
                <button class="play-btn" onclick="checkTimeline()" style="display: block; margin: 30px auto;">
                    ‚úÖ Ki·ªÉm Tra ƒê√°p √Ån
                </button>
            </div>
        </div>

        <!-- Game 4: Memory -->
        <div id="memoryGame" class="game-screen">
            <div class="game-header">
                <button class="back-btn" onclick="backToMenu()">‚Üê V·ªÅ Menu</button>
                <div class="score-display">
                    L∆∞·ª£t: <span id="memoryMoves">0</span> | 
                    ƒê√∫ng: <span id="memoryMatched">0</span>/8
                </div>
            </div>
            <div class="quiz-container">
                <h2 style="text-align: center; color: #2d3748; margin-bottom: 20px;">
                    T√¨m c√°c c·∫∑p anh h√πng gi·ªëng nhau!
                </h2>
                <div class="memory-grid" id="memoryGrid"></div>
            </div>
        </div>

        <!-- Game 5: Millionaire -->
        <div id="millionaireGame" class="game-screen">
            <div class="game-header">
                <button class="back-btn" onclick="backToMenu()">‚Üê V·ªÅ Menu</button>
                <div class="score-display">C√¢u: <span id="millionaireLevel">1</span>/15</div>
            </div>
            <div class="millionaire-container">
                <div class="prize-ladder" id="prizeLadder"></div>
                <div class="quiz-container">
                    <div class="lifelines">
                        <button class="lifeline-btn" id="fiftyFifty" onclick="useFiftyFifty()">
                            50:50
                        </button>
                        <button class="lifeline-btn" id="askAudience" onclick="askAudience()">
                            üë• H·ªèi kh√°n gi·∫£
                        </button>
                    </div>
                    <div class="question" id="millionaireQuestion"></div>
                    <div class="options" id="millionaireOptions"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentGame = null;
        let gameState = {};

        // Quiz data
        const quizQuestions = [
            {
                question: "Vua Quang Trung ƒë√°nh tan qu√¢n Thanh v√†o nƒÉm n√†o?",
                options: ["1785", "1789", "1802", "1858"],
                correct: 1
            },
            {
                question: "Ai l√† ng∆∞·ªùi s√°ng l·∫≠p tri·ªÅu Nguy·ªÖn?",
                options: ["Nguy·ªÖn Hu·ªá", "Gia Long", "Minh M·∫°ng", "T·ª± ƒê·ª©c"],
                correct: 1
            },
            {
                question: "B√† Tr∆∞ng Tr·∫Øc v√† Tr∆∞ng Nh·ªã kh·ªüi nghƒ©a ch·ªëng ai?",
                options: ["Nh√† Thanh", "Nh√† T·ªëng", "Nh√† H√°n", "Nh√† Minh"],
                correct: 2
            },
            {
                question: "Tr·∫≠n B·∫°ch ƒê·∫±ng nƒÉm 938 do ai ch·ªâ huy?",
                options: ["L√Ω Th∆∞·ªùng Ki·ªát", "Ng√¥ Quy·ªÅn", "L√™ L·ª£i", "Tr·∫ßn H∆∞ng ƒê·∫°o"],
                correct: 1
            },
            {
                question: "Th·ªß ƒë√¥ ƒë·∫ßu ti√™n c·ªßa n∆∞·ªõc Vi·ªát Nam ƒë·ªôc l·∫≠p l√†?",
                options: ["Hoa L∆∞", "ThƒÉng Long", "Ph√∫ Xu√¢n", "Gia ƒê·ªãnh"],
                correct: 0
            },
            {
                question: "Tr·∫≠n ƒêi·ªán Bi√™n Ph·ªß k·∫øt th√∫c nƒÉm n√†o?",
                options: ["1945", "1954", "1975", "1969"],
                correct: 1
            },
            {
                question: "Ai ƒë∆∞·ª£c g·ªçi l√† 'H√πm X√°m'?",
                options: ["V√µ Nguy√™n Gi√°p", "Tr·∫ßn H∆∞ng ƒê·∫°o", "Ho√†ng Hoa Th√°m", "Nguy·ªÖn Tr√£i"],
                correct: 2
            },
            {
                question: "Cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ k√©o d√†i bao nhi√™u nƒÉm?",
                options: ["9 nƒÉm", "15 nƒÉm", "21 nƒÉm", "30 nƒÉm"],
                correct: 2
            },
            {
                question: "Kinh ƒë√¥ tri·ªÅu Nguy·ªÖn ƒë·∫∑t ·ªü ƒë√¢u?",
                options: ["H√† N·ªôi", "Hu·∫ø", "S√†i G√≤n", "ƒê√† N·∫µng"],
                correct: 1
            },
            {
                question: "Ch·ªß t·ªãch H·ªì Ch√≠ Minh sinh nƒÉm n√†o?",
                options: ["1890", "1900", "1920", "1911"],
                correct: 0
            }
        ];

        // Timeline data
        const timelineEvents = [
            { text: "Kh·ªüi nghƒ©a Hai B√† Tr∆∞ng", year: 40, id: 1 },
            { text: "Tr·∫≠n B·∫°ch ƒê·∫±ng - Ng√¥ Quy·ªÅn", year: 938, id: 2 },
            { text: "Tr·∫≠n B·∫°ch ƒê·∫±ng - Tr·∫ßn H∆∞ng ƒê·∫°o", year: 1288, id: 3 },
            { text: "Kh·ªüi nghƒ©a Lam S∆°n", year: 1418, id: 4 },
            { text: "Chi·∫øn th·∫Øng Ng·ªçc H·ªìi - ƒê·ªëng ƒêa", year: 1789, id: 5 }
        ];

        // Memory game data
        const memoryCards = [
            "üó°Ô∏è", "üó°Ô∏è", "üèπ", "üèπ", "‚öîÔ∏è", "‚öîÔ∏è", "üõ°Ô∏è", "üõ°Ô∏è",
            "üêâ", "üêâ", "üëë", "üëë", "üè∞", "üè∞", "‚ö°", "‚ö°"
        ];

        // Millionaire questions
        const millionaireQuestions = [
            {
                question: "Qu·ªëc hi·ªáu Vi·ªát Nam ƒë∆∞·ª£c ƒë·∫∑t v√†o nƒÉm n√†o?",
                options: ["1802", "1945", "1975", "1954"],
                correct: 1,
                prize: "200.000"
            },
            {
                question: "Ai l√† danh t∆∞·ªõng ƒë√°nh tan qu√¢n M√¥ng C·ªï 3 l·∫ßn?",
                options: ["L√Ω Th∆∞·ªùng Ki·ªát", "Tr·∫ßn H∆∞ng ƒê·∫°o", "L√™ L·ª£i", "Nguy·ªÖn Hu·ªá"],
                correct: 1,
                prize: "400.000"
            },
            {
                question: "Th√†nh C·ªï Loa ƒë∆∞·ª£c x√¢y d·ª±ng d∆∞·ªõi th·ªùi vua n√†o?",
                options: ["An D∆∞∆°ng V∆∞∆°ng", "ƒêinh Ti√™n Ho√†ng", "L√Ω Th√°i T·ªï", "H√πng V∆∞∆°ng"],
                correct: 0,
                prize: "600.000"
            },
            {
                question: "B√¨nh Ng√¥ ƒê·∫°i C√°o do ai so·∫°n?",
                options: ["Nguy·ªÖn Tr√£i", "Chu VƒÉn An", "L√™ Qu√Ω ƒê√¥n", "Nguy·ªÖn Du"],
                correct: 0,
                prize: "1.000.000"
            },
            {
                question: "Tri·ªÅu ƒë·∫°i n√†o tr·ªã v√¨ Vi·ªát Nam l√¢u nh·∫•t?",
                options: ["L√Ω", "Tr·∫ßn", "L√™", "Nguy·ªÖn"],
                correct: 2,
                prize: "2.000.000"
            }
        ];

        function startGame(game) {
            currentGame = game;
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById(game + 'Game').classList.add('active');

            switch(game) {
                case 'quiz': initQuiz(); break;
                case 'strategy': initStrategy(); break;
                case 'timeline': initTimeline(); break;
                case 'memory': initMemory(); break;
                case 'millionaire': initMillionaire(); break;
            }
        }

        function backToMenu() {
            document.querySelectorAll('.game-screen').forEach(s => s.classList.remove('active'));
            document.getElementById('mainMenu').style.display = 'block';
            if (gameState.timer) clearInterval(gameState.timer);
        }

        // QUIZ GAME
        function initQuiz() {
            gameState = {
                score: 0,
                currentQ: 0,
                timeLeft: 30,
                questions: [...quizQuestions].sort(() => Math.random() - 0.5)
            };
            showQuizQuestion();
            startQuizTimer();
        }

        function showQuizQuestion() {
            if (gameState.currentQ >= gameState.questions.length) {
                showResult('quiz', gameState.score, gameState.questions.length);
                return;
            }

            const q = gameState.questions[gameState.currentQ];
            document.getElementById('quizQuestion').textContent = 
                `C√¢u ${gameState.currentQ + 1}: ${q.question}`;
            
            const optionsDiv = document.getElementById('quizOptions');
            optionsDiv.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.onclick = () => checkQuizAnswer(i);
                optionsDiv.appendChild(btn);
            });

            const progress = ((gameState.currentQ + 1) / gameState.questions.length) * 100;
            document.getElementById('quizProgress').style.width = progress + '%';
        }

        function checkQuizAnswer(selected) {
            const q = gameState.questions[gameState.currentQ];
            const btns = document.querySelectorAll('#quizOptions .option-btn');
            
            btns.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (selected === q.correct) {
                btns[selected].classList.add('correct');
                gameState.score++;
                document.getElementById('quizScore').textContent = gameState.score;
            } else {
                btns[selected].classList.add('wrong');
                btns[q.correct].classList.add('correct');
            }

            setTimeout(() => {
                gameState.currentQ++;
                gameState.timeLeft = 30;
                showQuizQuestion();
            }, 1500);
        }

        function startQuizTimer() {
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('quizTimer').textContent = gameState.timeLeft;
                
                if (gameState.timeLeft <= 0) {
                    checkQuizAnswer(-1);
                }
            }, 1000);
        }

        // STRATEGY GAME
        function initStrategy() {
            gameState = {
                friendlyUnits: [],
                enemyUnits: [],
                selectedUnit: null
            };

            const battlefield = document.getElementById('battlefield');
            battlefield.innerHTML = '';

            // Create friendly units (blue)
            for (let i = 0; i < 10; i++) {
                const unit = createUnit('üõ°Ô∏è', 'friendly', 
                    Math.random() * 80 + 10, 
                    Math.random() * 30 + 60);
                gameState.friendlyUnits.push(unit);
                battlefield.appendChild(unit);
            }

            // Create enemy units (red)
            for (let i = 0; i < 15; i++) {
                const unit = createUnit('‚öîÔ∏è', 'enemy', 
                    Math.random() * 80 + 10, 
                    Math.random() * 40 + 10);
                gameState.enemyUnits.push(unit);
                battlefield.appendChild(unit);
            }

            updateStrategyCounts();
        }

        function createUnit(emoji, type, left, top) {
            const unit = document.createElement('div');
            unit.className = `unit ${type}`;
            unit.textContent = emoji;
            unit.style.left = left + '%';
            unit.style.top = top + '%';
            
            unit.onclick = () => {
                if (type === 'friendly') {
                    if (gameState.selectedUnit) {
                        gameState.selectedUnit.style.transform = 'scale(1)';
                    }
                    gameState.selectedUnit = unit;
                    unit.style.transform = 'scale(1.3)';
                } else if (type === 'enemy' && gameState.selectedUnit) {
                    // Attack!
                    unit.style.animation = 'none';
                    setTimeout(() => {
                        unit.remove();
                        gameState.enemyUnits = gameState.enemyUnits.filter(u => u !== unit);
                        updateStrategyCounts();
                        
                        if (gameState.enemyUnits.length === 0) {
                            showResult('strategy', gameState.friendlyUnits.length, 15);
                        }
                    }, 100);
                }
            };
            
            return unit;
        }

        function updateStrategyCounts() {
            document.getElementById('friendlyCount').textContent = gameState.friendlyUnits.length;
            document.getElementById('enemyCount').textContent = gameState.enemyUnits.length;
        }

        // TIMELINE GAME
        function initTimeline() {
            gameState = {
                events: [...timelineEvents].sort(() => Math.random() - 0.5),
                placed: []
            };

            const eventsDiv = document.getElementById('timelineEvents');
            const zonesDiv = document.getElementById('timelineDropZones');
            
            eventsDiv.innerHTML = '';
            zonesDiv.innerHTML = '';

            gameState.events.forEach(event => {
                const card = document.createElement('div');
                card.className = 'event-card';
                card.textContent = event.text;
                card.draggable = true;
                card.dataset.id = event.id;
                
                card.ondragstart = (e) => {
                    e.dataTransfer.setData('text/plain', event.id);
                    card.classList.add('dragging');
                };
                
                card.ondragend = () => {
                    card.classList.remove('dragging');
                };
                
                eventsDiv.appendChild(card);
            });

            for (let i = 0; i < timelineEvents.length; i++) {
                const zone = document.createElement('div');
                zone.className = 'drop-zone';
                zone.textContent = `V·ªã tr√≠ ${i + 1}`;
                zone.dataset.position = i;
                
                zone.ondragover = (e) => {
                    e.preventDefault();
                    zone.classList.add('drag-over');
                };
                
                zone.ondragleave = () => {
                    zone.classList.remove('drag-over');
                };
                
                zone.ondrop = (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    
                    const id = parseInt(e.dataTransfer.getData('text/plain'));
                    const card = document.querySelector(`[data-id="${id}"]`);
                    
                    if (zone.children.length === 0) {
                        zone.appendChild(card);
                    }
                };
                
                zonesDiv.appendChild(zone);
            }
        }

        function checkTimeline() {
            const zones = document.querySelectorAll('.drop-zone');
            const sortedEvents = [...timelineEvents].sort((a, b) => a.year - b.year);
            let correct = 0;

            zones.forEach((zone, i) => {
                const card = zone.querySelector('.event-card');
                if (card) {
                    const id = parseInt(card.dataset.id);
                    if (id === sortedEvents[i].id) {
                        card.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';
                        correct++;
                    } else {
                        card.style.background = 'linear-gradient(135deg, #f56565 0%, #e53e3e 100%)';
                    }
                }
            });

            document.getElementById('timelineScore').textContent = correct;
            
            setTimeout(() => {
                if (correct === timelineEvents.length) {
                    showResult('timeline', correct, timelineEvents.length);
                }
            }, 2000);
        }

        // MEMORY GAME
        function initMemory() {
            gameState = {
                cards: [...memoryCards].sort(() => Math.random() - 0.5),
                flipped: [],
                matched: 0,
                moves: 0
            };

            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = '';

            gameState.cards.forEach((card, i) => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'memory-card';
                cardDiv.textContent = '?';
                cardDiv.dataset.index = i;
                cardDiv.dataset.value = card;
                
                cardDiv.onclick = () => flipCard(cardDiv);
                
                grid.appendChild(cardDiv);
            });
        }

        function flipCard(card) {
            if (gameState.flipped.length >= 2 || card.classList.contains('flipped')) return;

            card.classList.add('flipped');
            card.textContent = card.dataset.value;
            gameState.flipped.push(card);

            if (gameState.flipped.length === 2) {
                gameState.moves++;
                document.getElementById('memoryMoves').textContent = gameState.moves;

                const [card1, card2] = gameState.flipped;
                
                if (card1.dataset.value === card2.dataset.value) {
                    setTimeout(() => {
                        card1.classList.add('matched');
                        card2.classList.add('matched');
                        gameState.matched++;
                        document.getElementById('memoryMatched').textContent = gameState.matched;
                        gameState.flipped = [];

                        if (gameState.matched === memoryCards.length / 2) {
                            showResult('memory', gameState.moves, memoryCards.length / 2);
                        }
                    }, 500);
                } else {
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        card1.textContent = '?';
                        card2.textContent = '?';
                        gameState.flipped = [];
                    }, 1000);
                }
            }
        }

        // MILLIONAIRE GAME
        function initMillionaire() {
            gameState = {
                level: 0,
                lifelines: { fiftyFifty: true, audience: true }
            };

            const ladder = document.getElementById('prizeLadder');
            ladder.innerHTML = '';
            
            for (let i = millionaireQuestions.length - 1; i >= 0; i--) {
                const item = document.createElement('div');
                item.className = 'prize-item';
                if (i === 0) item.classList.add('current');
                item.innerHTML = `<span>C√¢u ${i + 1}</span><span>${millionaireQuestions[i].prize}ƒë</span>`;
                item.dataset.level = i;
                ladder.appendChild(item);
            }

            showMillionaireQuestion();
        }

        function showMillionaireQuestion() {
            if (gameState.level >= millionaireQuestions.length) {
                showResult('millionaire', gameState.level, millionaireQuestions.length);
                return;
            }

            const q = millionaireQuestions[gameState.level];
            document.getElementById('millionaireLevel').textContent = gameState.level + 1;
            document.getElementById('millionaireQuestion').textContent = q.question;
            
            const optionsDiv = document.getElementById('millionaireOptions');
            optionsDiv.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = String.fromCharCode(65 + i) + ': ' + opt;
                btn.dataset.index = i;
                btn.onclick = () => checkMillionaireAnswer(i);
                optionsDiv.appendChild(btn);
            });

            document.querySelectorAll('.prize-item').forEach(item => {
                item.classList.remove('current', 'completed');
            });
            document.querySelector(`[data-level="${gameState.level}"]`).classList.add('current');
        }

        function checkMillionaireAnswer(selected) {
            const q = millionaireQuestions[gameState.level];
            const btns = document.querySelectorAll('#millionaireOptions .option-btn');
            
            btns.forEach(btn => btn.style.pointerEvents = 'none');
            
            if (selected === q.correct) {
                btns[selected].classList.add('correct');
                document.querySelector(`[data-level="${gameState.level}"]`).classList.add('completed');
                
                setTimeout(() => {
                    gameState.level++;
                    showMillionaireQuestion();
                }, 1500);
            } else {
                btns[selected].classList.add('wrong');
                btns[q.correct].classList.add('correct');
                
                setTimeout(() => {
                    showResult('millionaire', gameState.level, millionaireQuestions.length);
                }, 2000);
            }
        }

        function useFiftyFifty() {
            if (!gameState.lifelines.fiftyFifty) return;
            
            const q = millionaireQuestions[gameState.level];
            const btns = document.querySelectorAll('#millionaireOptions .option-btn');
            let removed = 0;
            
            btns.forEach((btn, i) => {
                if (i !== q.correct && removed < 2) {
                    btn.style.display = 'none';
                    removed++;
                }
            });
            
            gameState.lifelines.fiftyFifty = false;
            document.getElementById('fiftyFifty').disabled = true;
        }

        function askAudience() {
            if (!gameState.lifelines.audience) return;
            
            const q = millionaireQuestions[gameState.level];
            const results = [0, 0, 0, 0];
            results[q.correct] = 60 + Math.random() * 30;
            
            let remaining = 100 - results[q.correct];
            for (let i = 0; i < 4; i++) {
                if (i !== q.correct) {
                    results[i] = Math.random() * remaining;
                    remaining -= results[i];
                }
            }
            
            alert('Kh√°n gi·∫£ b√¨nh ch·ªçn:\n' + 
                q.options.map((opt, i) => 
                    `${String.fromCharCode(65 + i)}: ${Math.round(results[i])}%`
                ).join('\n'));
            
            gameState.lifelines.audience = false;
            document.getElementById('askAudience').disabled = true;
        }

        function showResult(game, score, total) {
            const gameDiv = document.getElementById(game + 'Game');
            gameDiv.innerHTML = `
                <div class="result-screen">
                    <h2>üéâ Ho√†n Th√†nh! üéâ</h2>
                    <div class="result-score">${score}/${total}</div>
                    <p style="font-size: 1.3em; color: #718096;">
                        ${score === total ? 'Xu·∫•t s·∫Øc! B·∫°n l√† b·∫≠c th·∫ßy l·ªãch s·ª≠!' :
                          score >= total * 0.7 ? 'R·∫•t t·ªët! Ti·∫øp t·ª•c ph√°t huy!' :
                          'C·ªë g·∫Øng l√™n! H√£y th·ª≠ l·∫°i!'}
                    </p>
                    <button class="restart-btn" onclick="startGame('${game}')">
                        üîÑ Ch∆°i L·∫°i
                    </button>
                    <button class="restart-btn" onclick="backToMenu()">
                        üè† V·ªÅ Menu
                    </button>
                </div>
            `;
        }
    </script>
</body>
</html>
